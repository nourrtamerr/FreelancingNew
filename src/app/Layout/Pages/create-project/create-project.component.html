<div class="create-project-container">
    <div class="create-project-header">
        <h1>Create a New Project</h1>
        <p>Get the help you need from our talented freelancers</p>
    </div>

    <form [formGroup]="projectForm" (ngSubmit)="onSubmit()" class="project-form">
        <div class="form-card">
            <div class="form-section">
                <h2>Basic Information</h2>
                <div class="form-section">
                    <h2>Project Type</h2>
                    <div class="project-type-selector">
                        <label class="radio-card">
                            <input type="radio" formControlName="projectType" value="fixed" (change)="onProjectTypeChange('fixed')" />
                            <span class="radio-content">
                                <i class="fas fa-money-bill"></i>
                                <span>Fixed Price</span>
                                <small>Pay a fixed price for your project</small>
                            </span>
                        </label>

                        <label class="radio-card">
                            <input type="radio" formControlName="projectType" value="bidding" (change)="onProjectTypeChange('bidding')" />
                            <span class="radio-content">
                                <i class="fas fa-gavel"></i>
                                <span>Bidding</span>
                                <small>Let freelancers bid on your project</small>
                            </span>
                        </label>
                    </div>

                    <div *ngIf="isBiddingProject" class="bidding-dates">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="biddingStartDate">Bidding Start Date</label>
                                <input type="date" id="biddingStartDate" formControlName="biddingStartDate" class="form-control"/>
                                <small class="error-message" *ngIf="projectForm.get('biddingStartDate')?.invalid && projectForm.get('biddingStartDate')?.touched">
                                    Start date is required
                                </small>
                            </div>

                            <div class="form-group">
                                <label for="biddingEndDate">Bidding End Date</label>
                                <input type="date" id="biddingEndDate" formControlName="biddingEndDate" class="form-control"/>
                                <small class="error-message" *ngIf="projectForm.get('biddingEndDate')?.invalid && projectForm.get('biddingEndDate')?.touched">
                                    End date is required
                                </small>
                            </div>

                            <div class="form-group">
                                <label for="minPrice">Minimum Price</label>
                                <input type="number" id="minPrice" formControlName="minPrice" class="form-control"/>
                                <small class="error-message" *ngIf="projectForm.get('minPrice')?.invalid && projectForm.get('minPrice')?.touched">
                                    <span *ngIf="projectForm.get('minPrice')?.errors?.['required']">Minimum price is required</span>
                                    <span *ngIf="projectForm.get('minPrice')?.errors?.['min']">Minimum price must be greater than 0</span>
                                </small>
                            </div>

                            <div class="form-group">
                                <label for="maxPrice">Maximum Price</label>
                                <input type="number" id="maxPrice" formControlName="maxPrice" class="form-control"/>
                                <small class="error-message" *ngIf="projectForm.get('maxPrice')?.invalid && projectForm.get('maxPrice')?.touched">
                                    <span *ngIf="projectForm.get('maxPrice')?.errors?.['required']">Maximum price is required</span>
                                    <span *ngIf="projectForm.get('maxPrice')?.errors?.['min']">Maximum price must be greater than 0</span>
                                </small>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="title">Project Title</label>
                    <input type="text" id="title" formControlName="title"
                           placeholder="Enter a clear title describing your project"
                           class="form-control" />
                    <small class="form-hint">Example: Build a responsive website using React</small>
                    <small class="error-message" *ngIf="projectForm.get('title')?.invalid && projectForm.get('title')?.touched">
                        <span *ngIf="projectForm.get('title')?.errors?.['required']">Title is required</span>
                        <span *ngIf="projectForm.get('title')?.errors?.['minlength']">Title must be at least 10 characters</span>
                    </small>
                </div>

                <div class="form-group">
                    <label for="description">Project Description</label>
                    <textarea id="description" formControlName="description"
                              placeholder="Describe your project in detail"
                              class="form-control" rows="6"></textarea>
                    <small class="form-hint">Be specific about your requirements and expectations</small>
                    <small class="error-message" *ngIf="projectForm.get('description')?.invalid && projectForm.get('description')?.touched">
                        <span *ngIf="projectForm.get('description')?.errors?.['required']">Description is required</span>
                        <span *ngIf="projectForm.get('description')?.errors?.['minlength']">Description must be at least 30 characters</span>
                    </small>
                </div>
            </div>

            <div class="form-section">
                <h2>Project Details</h2>

                <div class="form-row">
                    <div class="form-group">
                        <label for="currency">Currency</label>
                        <select id="currency" formControlName="currency" class="form-control">
                            <option value="">Select Currency</option>
                            <option value="1">USD ($)</option>
                            <option value="2">EUR (€)</option>
                            <option value="3">GBP (£)</option>
                        </select>
                        <small class="error-message" *ngIf="projectForm.get('currency')?.invalid && projectForm.get('currency')?.touched">
                            Please select a currency
                        </small>
                    </div>

                    <div class="form-group">
                        <label for="expectedDuration">Duration (in months)</label>
                        <input type="number" id="expectedDuration" formControlName="expectedDuration"
                               placeholder="Expected months" class="form-control"/>
                        <small class="error-message" *ngIf="projectForm.get('expectedDuration')?.invalid && projectForm.get('expectedDuration')?.touched">
                            <span *ngIf="projectForm.get('expectedDuration')?.errors?.['required']">Duration is required</span>
                            <span *ngIf="projectForm.get('expectedDuration')?.errors?.['min']">Duration must be at least 1 month</span>
                        </small>
                    </div>
                </div>

                <div class="form-group">
                    <label for="experienceLevel">Experience Level</label>
                    <div class="experience-level-selector">
                        <label class="radio-card">
                            <input type="radio" formControlName="experienceLevel" value="1" />
                            <span class="radio-content">
                                <i class="fas fa-user"></i>
                                <span>Entry</span>
                                <small>Looking for someone relatively new</small>
                            </span>
                        </label>

                        <label class="radio-card">
                            <input type="radio" formControlName="experienceLevel" value="2" />
                            <span class="radio-content">
                                <i class="fas fa-user-tie"></i>
                                <span>Intermediate</span>
                                <small>Looking for substantial experience</small>
                            </span>
                        </label>

                        <label class="radio-card">
                            <input type="radio" formControlName="experienceLevel" value="3" />
                            <span class="radio-content">
                                <i class="fas fa-star"></i>
                                <span>Expert</span>
                                <small>Looking for comprehensive expertise</small>
                            </span>
                        </label>
                        <small class="error-message" *ngIf="projectForm.get('experienceLevel')?.invalid && projectForm.get('experienceLevel')?.touched">
                            Please select an experience level
                        </small>
                    </div>
                </div>
            </div>
              <!-- Subcategory Section -->
              <div class="form-section">
                <h2>Subcategory</h2>
                <div class="form-group">
                    <label for="subcategoryID">Select Subcategory</label>
                    <select id="subcategoryID" formControlName="subcategoryID" class="form-control">
                        <option *ngFor="let sub of subcategories" [value]="sub.id">{{ sub.name }}</option>
                      </select>

                    <small class="form-hint">Choose a subcategory for your project</small>

                    <small class="error-message" *ngIf="projectForm.get('subcategoryID')?.invalid && projectForm.get('subcategoryID')?.touched">
                        Please select a subcategory
                    </small>
                </div>
            </div>

            <!-- Skills Section -->
            <div class="form-section">
                <h2>Skills</h2>
                <div class="form-group">
                    <label for="projectSkills">Select Skills</label>
                    <select id="projectSkills" formControlName="projectSkills" class="form-control" multiple>
                        <option *ngFor="let skill of availableSkills" [value]="skill.id">{{ skill.name }}</option>
                      </select>
                    <small class="form-hint">Choose the relevant skills for your project</small>

                    <small class="error-message" *ngIf="projectForm.get('projectSkills')?.invalid && projectForm.get('projectSkills')?.touched">
                        Please select at least one skill
                    </small>
                </div>
            </div>

<!-- Fixed Price Field (only shown for fixed price projects) -->
<div *ngIf="!isBiddingProject" class="form-group">
    <label for="fixedPrice">Fixed Price</label>
    <input type="number" id="fixedPrice" formControlName="fixedPrice" class="form-control"/>
    <small class="error-message" *ngIf="projectForm.get('fixedPrice')?.invalid && projectForm.get('fixedPrice')?.touched">
        <span *ngIf="projectForm.get('fixedPrice')?.errors?.['required']">Fixed price is required</span>
        <span *ngIf="projectForm.get('fixedPrice')?.errors?.['min']">Fixed price must be greater than 0</span>
    </small>
</div>



            <div class="form-actions">
            </div>
            <button type="submit"  class="btn-primary" [disabled]="projectForm.invalid">
            <!-- <button type="submit" class="btn-primary"> -->

                Post Project
                <i class="fas fa-arrow-right"></i>
            </button>
            <div class="form-actions">


                <!-- Navigation buttons -->
                <div class="navigation-buttons">
                    <button type="button" class="btn-secondary" routerLink="/fixed">
                        <i class="fas fa-list"></i>
                        Go to Fixed Projects
                    </button>
                    <button type="button" class="btn-secondary" routerLink="/new">
                        <i class="fas fa-list"></i>
                        Go to Bidding Projects
                    </button>

                    <button *ngIf="createdProjectId" class="btn btn-secondary" [routerLink]="['/fixed-project', createdProjectId]">
                        <i class="fas fa-info-circle"></i>
                        View Project Details
                      </button>
                      </div>
            </div>
        </div>
    </form>
</div>

